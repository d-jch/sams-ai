# SAMS 业务需求与系统架构

## 1. 项目概述

**测序申请管理系统 (SAMS)**
是一个面向中小型基因组学实验室的Web实验室信息管理系统，采用 Fresh 2 + Deno 2 +
PostgreSQL 技术栈。

### 基本信息

- **目标用户**: 50-200个用户规模的科研院所、生物技术公司
- **技术架构**: 单体应用，SSR + Islands架构
- **核心价值**: 数字化测序工作流程，提升效率，降低错误率

## 2. 用户需求分析

### 2.1 核心用户群体

**申请人** (主要用户群)

- 研究生、博士后、科研人员
- 需求：快速提交申请、跟踪样品状态、获取结果
- 痛点：复杂表单、不明确的进度跟踪

**技术员** (操作用户)

- 实验室技术员、测序操作员
- 需求：高效的样品管理、工作流程控制
- 痛点：纸质记录易错、状态更新繁琐

**管理员** (决策用户)

- 实验室主任、项目管理员
- 需求：资源统计、成本控制、质量监控
- 痛点：缺乏数据可视化、审计困难

### 2.2 功能需求优先级

**核心功能** (MVP)

- 用户认证与授权管理
- 测序申请提交与审核
- 样品信息管理与追踪
- 基础工作流程管理
- 简单报告与导出

**重要功能** (V1.1)

- 高级搜索与过滤
- 邮件通知系统
- 数据统计与可视化
- 条码生成与扫描

**增值功能** (V2.0)

- 测序设备集成
- 高级报告定制
- API开放接口
- 移动端适配

## 3. 系统架构设计

### 3.1 技术选型

**前端架构**

- Fresh 2.x: 全栈框架，SSR优先
- daisyUI 5.x: 组件库，快速UI开发
- TypeScript: 类型安全，提升代码质量

**后端架构**

- Deno 2.x: 现代运行时，原生TypeScript支持
- PostgreSQL: 关系数据库，ACID保证
- JWT: 无状态认证机制

**部署架构**

- 单体应用部署
- Docker容器化
- Nginx反向代理
- 单台服务器满足需求

### 3.2 系统架构图

```
┌─────────────────────────────────────────────────────────────────────┐
│                          用户层                                      │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                  │
│  │   申请人     │  │    技术员    │  │   管理员    │                  │
│  └─────────────┘  └─────────────┘  └─────────────┘                  │
├─────────────────────────────────────────────────────────────────────┤
│                        应用层 (Fresh 2)                             │
│  ┌─────────────────────────────────────────────────────────────────┐ │
│  │              Web应用服务器 (Deno 2)                            │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐            │ │
│  │  │  路由层     │  │  业务逻辑层  │  │   数据访问层 │            │ │
│  │  │ (Routes)    │  │ (Services)  │  │(Repository) │            │ │
│  │  └─────────────┘  └─────────────┘  └─────────────┘            │ │
│  └─────────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────┤
│                      数据层 (PostgreSQL)                            │
│  ┌─────────────────────────────────────────────────────────────────┐ │
│  │                     关系数据库                                  │ │
│  │  Users │ Applications │ Samples │ Workflows │ Reports            │ │
│  └─────────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────┤
│                      基础设施层                                      │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                  │
│  │    Nginx    │  │   Docker    │  │   Linux     │                  │
│  │  (反向代理)  │  │  (容器化)   │  │  (操作系统)  │                  │
│  └─────────────┘  └─────────────┘  └─────────────┘                  │
└─────────────────────────────────────────────────────────────────────┘
```

### 3.3 核心模块设计

**认证授权模块**

- JWT无状态认证
- 基于角色的权限控制 (RBAC)
- 密码强度要求与安全存储

**申请管理模块**

- 表单驱动的申请流程
- 多步骤审核工作流
- 状态跟踪与历史记录

**样品管理模块**

- 样品信息录入与验证
- 条码生成与识别
- 样品生命周期跟踪

**报告统计模块**

- 数据导出 (Excel/CSV)
- 基础统计图表
- 审计日志查询

## 4. 非功能性需求

### 4.1 性能要求

- **响应时间**: 页面加载 < 3秒
- **并发支持**: 10个并发用户，峰值50个
- **数据容量**: 支持10万条记录
- **可用性**: 工作时间99%可用性

### 4.2 安全要求

- **认证**: 强密码策略 + JWT令牌
- **授权**: 基于角色的细粒度权限控制
- **数据**: HTTPS传输 + 敏感数据加密
- **审计**: 关键操作日志记录

### 4.3 可维护性

- **代码质量**: TypeScript强类型 + ESLint规范
- **文档**: 关键模块API文档
- **测试**: 单元测试覆盖率 > 70%
- **部署**: Docker一键部署

## 5. 实施计划

### 5.1 开发阶段

**Phase 1: 基础框架** (4周)

- Fresh 2项目初始化
- 数据库设计与初始化
- 用户认证系统
- 基础UI组件

**Phase 2: 核心功能** (6周)

- 申请提交与管理
- 样品信息管理
- 基础工作流程
- 数据导出功能

**Phase 3: 完善优化** (4周)

- 邮件通知系统
- 数据统计报表
- 性能优化
- 安全加固

### 5.2 部署要求

**最小硬件配置**

- CPU: 4核心
- 内存: 8GB RAM
- 存储: 100GB SSD
- 网络: 100Mbps带宽

**推荐生产配置**

- CPU: 8核心
- 内存: 16GB RAM
- 存储: 500GB SSD
- 网络: 1Gbps带宽
- 备份: 外部存储备份

## 6. 风险评估

### 6.1 技术风险

- **Fresh 2生态**: 相对新颖的框架，社区资源有限
- **Deno兼容性**: 部分npm包可能存在兼容问题
- **团队技能**: 需要学习Fresh 2开发模式

### 6.2 业务风险

- **用户接受度**: 从纸质流程到数字化的转换阻力
- **数据迁移**: 现有数据的清理和导入复杂性
- **变更管理**: 业务流程变更的培训成本

### 6.3 缓解策略

- 原型验证用户需求
- 分阶段渐进式上线
- 完善的培训和文档
- 数据备份和回滚机制

---

**文档版本**: 1.0\
**最后更新**: 2025年11月6日\
**维护团队**: SAMS开发团队
