# ğŸš€ æ–°ç‰ˆ Deno Deploy éƒ¨ç½²æŒ‡å—# ğŸš€ æ–°ç‰ˆ Deno Deploy éƒ¨ç½²æŒ‡å—

è¿™ä¸ªæŒ‡å—å°†å¸®åŠ©ä½ ä½¿ç”¨ **æ–°ç‰ˆ Deno Deploy** (console.deno.com) éƒ¨ç½² Fresh 2
åº”ç”¨ã€‚è¿™ä¸ªæŒ‡å—å°†å¸®åŠ©ä½ ä½¿ç”¨ **æ–°ç‰ˆ Deno Deploy** (console.deno.com) éƒ¨ç½² Fresh 2
åº”ç”¨ã€‚

æ–°ç‰ˆ Deno Deploy ä½¿ç”¨ GitHub App é›†æˆï¼Œæä¾›é›¶é…ç½®è‡ªåŠ¨éƒ¨ç½²ä½“éªŒã€‚æ–°ç‰ˆ Deno Deploy
ä½¿ç”¨ GitHub App é›†æˆï¼Œæä¾›é›¶é…ç½®è‡ªåŠ¨éƒ¨ç½²ä½“éªŒã€‚

## ğŸ“‹ å‰ç½®æ¡ä»¶## ğŸ“‹ å‰ç½®æ¡ä»¶

- GitHub è´¦æˆ·å’Œä»“åº“ (ä»£ç å·²æ¨é€)- GitHub è´¦æˆ·å’Œä»“åº“

- PostgreSQL æ•°æ®åº“ (æ¨è Supabase æˆ– Neon)- Deno Deploy
  æ–°ç‰ˆæœ¬è´¦æˆ·ï¼ˆconsole.deno.comï¼‰

- Deno Deploy è´¦æˆ·- PostgreSQL æ•°æ®åº“ï¼ˆæ¨è Supabase æˆ– Neonï¼‰

## âœ¨ é›¶é…ç½®è‡ªåŠ¨éƒ¨ç½²ç‰¹æ€§## ğŸ”§ æ­¥éª¤1: è®¾ç½® Deno Deploy æ–°ç‰ˆæœ¬

- ğŸš€ **GitHub App é›†æˆ** - æ— éœ€æ‰‹åŠ¨é…ç½®ä»¤ç‰Œ### 1.1 åˆ›å»º Deno Deploy è´¦æˆ·

- ğŸ“¦ **è‡ªåŠ¨æ¡†æ¶æ£€æµ‹** - è‡ªåŠ¨è¯†åˆ« Fresh 2 é¡¹ç›®

- ğŸ”„ **å®æ—¶æ„å»ºæ—¥å¿—** - å¯è§†åŒ–æ„å»ºè¿‡ç¨‹1. è®¿é—®
  [https://console.deno.com](https://console.deno.com) (**ä¸æ˜¯** dash.deno.com)

- ğŸŒ **å…¨çƒ CDN éƒ¨ç½²** - è‡ªåŠ¨è¾¹ç¼˜åˆ†å‘2. ç‚¹å‡» "Sign in with GitHub"

- ğŸ” **é¢„è§ˆéƒ¨ç½²** - æ¯ä¸ª PR éƒ½æœ‰ç‹¬ç«‹é¢„è§ˆ3. æˆæƒ Deno Deploy è®¿é—®ä½ çš„ GitHub è´¦æˆ·

- ğŸ›¡ï¸ **è‡ªåŠ¨ HTTPS** - SSL è¯ä¹¦è‡ªåŠ¨ç®¡ç†

### 1.2 åˆ›å»ºç»„ç»‡å’Œåº”ç”¨

## ğŸ”§ æ­¥éª¤ 1: åˆ›å»º Deno Deploy åº”ç”¨

1. åœ¨ console.deno.com åˆ›å»ºæ–°ç»„ç»‡

### 1.1 è®¿é—®æ§åˆ¶å°2. ç‚¹å‡» "+ New App"ï¼Œåç§°ä¸º `sams-ai`

3. é€‰æ‹©ä½ çš„ GitHub ä»“åº“

4. è®¿é—® [https://console.deno.com](https://console.deno.com)4. æ¡†æ¶è‡ªåŠ¨æ£€æµ‹ä¸º
   **Fresh**

5. ä½¿ç”¨ GitHub è´¦æˆ·ç™»å½•5. æ„å»ºé…ç½®è‡ªåŠ¨è®¾ç½® (æ— éœ€æ‰‹åŠ¨é…ç½®)

6. æˆæƒ Deno Deploy è®¿é—®ä½ çš„ GitHub ### 1.3 GitHub App é›†æˆ

### 1.2 åˆ›å»ºç»„ç»‡å’Œåº”ç”¨æ–°ç‰ˆ Deno Deploy ä½¿ç”¨ GitHub App è‡ªåŠ¨é›†æˆï¼Œ**æ— éœ€æ‰‹åŠ¨é…ç½® token**ï¼š

1. åˆ›å»ºæ–°ç»„ç»‡ (å¦‚æœæ²¡æœ‰)1. è¿æ¥ä»“åº“æ—¶ï¼ŒDeno Deploy ä¼šè¯·æ±‚ GitHub App æƒé™

2. ç‚¹å‡» **"New App"** æŒ‰é’®2. æˆæƒ Deno Deploy GitHub App è®¿é—®ä½ çš„ä»“åº“

3. é€‰æ‹©ä½ çš„ GitHub ä»“åº“ `sams-ai`3. éƒ¨ç½²é…ç½®è‡ªåŠ¨å®Œæˆ

### 1.3 è‡ªåŠ¨é…ç½®éªŒè¯## ğŸ”‘ æ­¥éª¤2: é…ç½®ç¯å¢ƒå˜é‡

Deno Deploy ä¼šè‡ªåŠ¨æ£€æµ‹å’Œé…ç½®ï¼š### 2.1 åœ¨ Deno Deploy ä¸­è®¾ç½®ç¯å¢ƒå˜é‡

- âœ… **Framework**: Fresh (è‡ªåŠ¨æ£€æµ‹)

- âœ… **Build Command**: `deno task build` (è‡ªåŠ¨é…ç½®)**æ–°ç‰ˆ Deno Deploy** -
  åœ¨åº”ç”¨è®¾ç½®ä¸­é…ç½®ï¼š

- âœ… **Entry Point**: `main.ts` (è‡ªåŠ¨è¯†åˆ«)

- âœ… **Node.js**: ä¸éœ€è¦ï¼Œçº¯ Deno ç¯å¢ƒ1. è¿›å…¥ä½ çš„ Deno Deploy åº”ç”¨æ§åˆ¶å°

2. ç‚¹å‡» "Settings" â†’ "Environment Variables"

## ğŸ”‘ æ­¥éª¤ 2: é…ç½®ç¯å¢ƒå˜é‡3. æ·»åŠ ç”Ÿäº§ç¯å¢ƒå˜é‡ï¼š

````bash
åœ¨ Deno Deploy åº”ç”¨è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼š   # æ•°æ®åº“é…ç½®

DATABASE_URL=postgresql://user:pass@host:port/db

1. è¿›å…¥åº”ç”¨æ§åˆ¶å°   DB_SSL=true

2. ç‚¹å‡» **"Settings"** â†’ **"Environment Variables"**   

3. æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š   # å®‰å…¨é…ç½®  

JWT_SECRET=your_production_jwt_secret_32_chars_long

### å¿…éœ€çš„ç¯å¢ƒå˜é‡   

# å¯é€‰: Argon2 é…ç½®

```bash   ARGON2_MEMORY_COST=131072

# æ•°æ®åº“é…ç½®   ARGON2_TIME_COST=4

DATABASE_URL=postgresql://user:password@host:port/database?sslmode=require   ARGON2_PARALLELISM=4

DB_SSL=true   ```
````

# å®‰å…¨é…ç½®7. ç‚¹å‡» "Create"

JWT_SECRET=your_production_jwt_secret_32_chars_or_longer8. **é‡è¦**:
ç«‹å³å¤åˆ¶ä»¤ç‰Œï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼‰

````
### 1.3 åˆ›å»ºé¡¹ç›®

### å¯é€‰çš„æ€§èƒ½é…ç½®

1. è®¿é—® [Projects Dashboard](https://dash.deno.com/projects)

```bash2. ç‚¹å‡» "New Project"

# Argon2 å¯†ç å“ˆå¸Œé…ç½® (ç”Ÿäº§ä¼˜åŒ–)3. é¡¹ç›®é…ç½®ï¼š

ARGON2_MEMORY_COST=131072    # 128 MB   ```

ARGON2_TIME_COST=4           # 4 æ¬¡è¿­ä»£   Name: sams-ai-fresh2

ARGON2_PARALLELISM=4         # 4 å¹¶è¡Œåº¦   Deploy method: GitHub Actions

```   ```

4. ç‚¹å‡» "Create Project"

### ç¯å¢ƒå˜é‡ä¸Šä¸‹æ–‡

## ğŸ”‘ æ­¥éª¤2: é…ç½®GitHub Secrets

ä¸ºä¸åŒç¯å¢ƒé…ç½®ä¸åŒçš„å˜é‡å€¼ï¼š

- **Production**: ç”Ÿäº§åŸŸåè®¿é—®æ—¶ä½¿ç”¨### 2.1 è®¾ç½®éƒ¨ç½²ä»¤ç‰Œ

- **Preview**: é¢„è§ˆéƒ¨ç½²æ—¶ä½¿ç”¨

1. è¿›å…¥GitHubä»“åº“

## ğŸ—„ï¸ æ­¥éª¤ 3: è®¾ç½®ç”Ÿäº§æ•°æ®åº“2. å¯¼èˆªåˆ° `Settings` â†’ `Secrets and variables` â†’ `Actions`

3. ç‚¹å‡» "New repository secret"

### æ¨èçš„æ•°æ®åº“æœåŠ¡4. æ·»åŠ Secretï¼š
````

#### Supabase (æ¨è) Name: DENO_DEPLOY_TOKEN

````bash   Secret: [ç²˜è´´æ­¥éª¤1.2ä¸­å¤åˆ¶çš„ä»¤ç‰Œ]
# è®¿é—® https://supabase.com   ```

# åˆ›å»ºæ–°é¡¹ç›®

# è·å–è¿æ¥å­—ç¬¦ä¸²### 2.2 GitHub Secrets (å¯é€‰)

DATABASE_URL=postgresql://postgres:[password]@db.[project-id].supabase.co:5432/postgres

```**æ–°ç‰ˆ Deno Deploy ä¸éœ€è¦ GitHub Secrets**ï¼Œä½†å¦‚æœä½¿ç”¨å…¶ä»–éƒ¨ç½²å¹³å°ï¼š



#### Neon```bash

```bash# ä»…ç”¨äºå…¶ä»–å¹³å°éƒ¨ç½²

# è®¿é—® https://neon.tech  RAILWAY_TOKEN=your_railway_token

# åˆ›å»ºæ•°æ®åº“FLY_API_TOKEN=your_fly_token

# è·å–è¿æ¥å­—ç¬¦ä¸²

DATABASE_URL=postgresql://[username]:[password]@[endpoint]/[dbname]?sslmode=require# æ–°ç‰ˆ Deno Deploy ä¸éœ€è¦:

```# DENO_DEPLOY_TOKEN (å·²åºŸå¼ƒï¼Œä½¿ç”¨ GitHub App)
````

### åˆå§‹åŒ–æ•°æ®åº“

## ğŸ—„ï¸ æ­¥éª¤3: é…ç½®ç”Ÿäº§æ•°æ®åº“

ä½¿ç”¨æä¾›çš„ SQL æ¨¡å¼åˆå§‹åŒ–æ•°æ®åº“ï¼š

### 3.1 åˆ›å»ºPostgreSQLæ•°æ®åº“

````bash
# æœ¬åœ°è¿æ¥ç”Ÿäº§æ•°æ®åº“æ¨èçš„äº‘PostgreSQLæœåŠ¡ï¼š

psql $DATABASE_URL -f sql/schema.sql

```- **Neon** (å…è´¹å±‚): https://neon.tech

- **Supabase** (å…è´¹å±‚): https://supabase.com

æˆ–è€…åœ¨æ•°æ®åº“æ§åˆ¶å°ä¸­ç›´æ¥æ‰§è¡Œ `sql/schema.sql` æ–‡ä»¶çš„å†…å®¹ã€‚- **Railway** (ä»˜è´¹): https://railway.app

- **AWS RDS**: https://aws.amazon.com/rds/

## ğŸš€ æ­¥éª¤ 4: éƒ¨ç½²åº”ç”¨

### 3.2 è·å–è¿æ¥å­—ç¬¦ä¸²

### 4.1 è‡ªåŠ¨éƒ¨ç½²è§¦å‘

æ•°æ®åº“åˆ›å»ºåï¼Œè·å–è¿æ¥å­—ç¬¦ä¸²æ ¼å¼ï¼š

é…ç½®å®Œæˆåï¼Œéƒ¨ç½²ä¼šåœ¨ä»¥ä¸‹æƒ…å†µè‡ªåŠ¨è§¦å‘ï¼š

- æ¨é€åˆ° `main` åˆ†æ”¯ â†’ **ç”Ÿäº§éƒ¨ç½²**```

- æ¨é€åˆ°å…¶ä»–åˆ†æ”¯ â†’ **é¢„è§ˆéƒ¨ç½²**  postgresql://username:password@host:port/database?sslmode=require

- åˆ›å»º Pull Request â†’ **PR é¢„è§ˆ**```



### 4.2 ç›‘æ§éƒ¨ç½²çŠ¶æ€### 3.3 åœ¨Deno Deployä¸­è®¾ç½®ç¯å¢ƒå˜é‡



1. åœ¨ Deno Deploy æ§åˆ¶å°æŸ¥çœ‹æ„å»ºæ—¥å¿—1. è¿›å…¥ä½ çš„Deno Deployé¡¹ç›®

2. æ„å»ºæˆåŠŸåè·å¾—éƒ¨ç½² URL2. ç‚¹å‡» "Settings" â†’ "Environment Variables"

3. æ£€æŸ¥åº”ç”¨å¥åº·çŠ¶æ€3. æ·»åŠ ä»¥ä¸‹å˜é‡ï¼š



### 4.3 è‡ªå®šä¹‰åŸŸå (å¯é€‰)```bash

DATABASE_URL=postgresql://username:password@host:port/database?sslmode=require

1. åœ¨åº”ç”¨è®¾ç½®ä¸­ç‚¹å‡» **"Domains"**DB_SSL=true

2. æ·»åŠ è‡ªå®šä¹‰åŸŸåJWT_SECRET=your_32_character_random_jwt_secret

3. é…ç½® DNS è®°å½•ARGON2_MEMORY_COST=65536

4. SSL è¯ä¹¦è‡ªåŠ¨ç”ŸæˆARGON2_TIME_COST=3

ARGON2_PARALLELISM=1

## ğŸ” æ­¥éª¤ 5: éªŒè¯éƒ¨ç½²DENO_ENV=production
````

### 5.1 æµ‹è¯•åº”ç”¨ç«¯ç‚¹

## ğŸ” æ­¥éª¤4: ç”Ÿæˆå®‰å…¨å¯†é’¥

````bash
# æ›¿æ¢ä¸ºä½ çš„å®é™…éƒ¨ç½² URL### 4.1 ç”ŸæˆJWT Secret

export DEPLOY_URL="https://your-app-name.deno.dev"

```bash

# æµ‹è¯•ä¸»è¦ç«¯ç‚¹# ä½¿ç”¨opensslç”Ÿæˆ32å­—ç¬¦éšæœºå­—ç¬¦ä¸²

curl -f $DEPLOY_URL/openssl rand -base64 32

curl -f $DEPLOY_URL/login

curl -f $DEPLOY_URL/signup# æˆ–ä½¿ç”¨Deno

deno eval "console.log(crypto.getRandomValues(new Uint8Array(32)).reduce((a,b)=>a+String.fromCharCode(b),''))"

# æµ‹è¯• API ç«¯ç‚¹```

curl -f $DEPLOY_URL/api/auth/me

```### 4.2 æµ‹è¯•æ•°æ®åº“è¿æ¥



### 5.2 æ£€æŸ¥åº”ç”¨åŠŸèƒ½```bash

# æœ¬åœ°æµ‹è¯•æ•°æ®åº“è¿æ¥

1. è®¿é—®æ³¨å†Œé¡µé¢ï¼Œåˆ›å»ºæµ‹è¯•è´¦æˆ·deno eval "

2. æµ‹è¯•ç™»å½•åŠŸèƒ½import { Client } from 'https://deno.land/x/postgres/mod.ts';

3. éªŒè¯ä¼šè¯ç®¡ç†const client = new Client('YOUR_DATABASE_URL');

4. æ£€æŸ¥æ•°æ®åº“è¿æ¥await client.connect();

console.log('âœ… Database connection successful');

### 5.3 ç›‘æ§å’Œæ—¥å¿—await client.end();

"

- **æ„å»ºæ—¥å¿—**: åœ¨éƒ¨ç½²å†å²ä¸­æŸ¥çœ‹```

- **åº”ç”¨æ—¥å¿—**: å®æ—¶æŸ¥çœ‹è¿è¡Œæ—¶æ—¥å¿—

- **æ€§èƒ½æŒ‡æ ‡**: ç›‘æ§å“åº”æ—¶é—´å’Œé”™è¯¯ç‡## ğŸ—ï¸ æ­¥éª¤5: æ›´æ–°å·¥ä½œæµé…ç½®



## ğŸ”§ æ•…éšœæ’é™¤### 5.1 ç¡®è®¤é¡¹ç›®åç§°



### å¸¸è§é—®é¢˜è§£å†³åœ¨ `.github/workflows/deploy.yml` ä¸­ç¡®è®¤é¡¹ç›®åç§°ä¸Deno Deployä¸­åˆ›å»ºçš„é¡¹ç›®ä¸€è‡´ï¼š



#### 1. GitHub App æƒé™é—®é¢˜```yaml

```- name: ğŸŒ Deploy to Deno Deploy

Error: Repository access denied  uses: denoland/deployctl@v1

```  with:

**è§£å†³æ–¹æ¡ˆ**:    project: "sams-ai-fresh2" # ç¡®è®¤è¿™ä¸ªåç§°æ­£ç¡®

- é‡æ–°æˆæƒ GitHub App     entrypoint: "main.ts"

- æ£€æŸ¥ç»„ç»‡æƒé™è®¾ç½®    root: "."

- ç¡®è®¤ä»“åº“å¯è§æ€§```



#### 2. ç¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ### 5.2 è‡ªå®šä¹‰éƒ¨ç½²é…ç½®
````

Error: DATABASE_URL is not definedå¦‚æœéœ€è¦ä¿®æ”¹éƒ¨ç½²é…ç½®ï¼Œç¼–è¾‘
`.github/workflows/deploy.yml`ï¼š

````
**è§£å†³æ–¹æ¡ˆ**:```yaml

- æ£€æŸ¥ç¯å¢ƒå˜é‡æ‹¼å†™# ä¿®æ”¹éƒ¨ç½²è§¦å‘æ¡ä»¶

- ç¡®è®¤å˜é‡ä¸Šä¸‹æ–‡é…ç½®on:

- é‡æ–°éƒ¨ç½²ä»¥åº”ç”¨æ›´æ”¹  workflow_run:

    workflows: ["Fresh 2 CI/CD Pipeline"]

#### 3. æ•°æ®åº“è¿æ¥å¤±è´¥    types: [completed]

```    branches: [main] # åªåœ¨mainåˆ†æ”¯éƒ¨ç½²

Error: Connection refused

```  # æ‰‹åŠ¨è§¦å‘

**è§£å†³æ–¹æ¡ˆ**:  workflow_dispatch:

- éªŒè¯ DATABASE_URL æ ¼å¼    inputs:

- æ£€æŸ¥æ•°æ®åº“æœåŠ¡çŠ¶æ€        environment:

- ç¡®è®¤ SSL æ¨¡å¼é…ç½®        description: "Environment to deploy to"

        required: true

#### 4. æ„å»ºå¤±è´¥        default: "production"
````

Error: Build process failed

````## âœ… æ­¥éª¤6: éªŒè¯éƒ¨ç½²
**è§£å†³æ–¹æ¡ˆ**:

- æ£€æŸ¥ `deno.json` é…ç½®### 6.1 è§¦å‘éƒ¨ç½²

- ç¡®è®¤æ‰€æœ‰ä¾èµ–å¯è®¿é—®

- æŸ¥çœ‹æ„å»ºæ—¥å¿—è¯¦ç»†é”™è¯¯1. æ¨é€ä»£ç åˆ°mainåˆ†æ”¯

2. æ£€æŸ¥GitHub Actionsæ‰§è¡Œæƒ…å†µ

### è°ƒè¯•æŠ€å·§3. ç¡®è®¤Deno Deployéƒ¨ç½²çŠ¶æ€



1. **æœ¬åœ°æµ‹è¯•**: ä½¿ç”¨ç›¸åŒç¯å¢ƒå˜é‡æœ¬åœ°è¿è¡Œ### 6.2 æµ‹è¯•éƒ¨ç½²çš„åº”ç”¨

2. **æ—¥å¿—åˆ†æ**: æŸ¥çœ‹è¯¦ç»†çš„æ„å»ºå’Œè¿è¡Œæ—¥å¿—  

3. **åˆ†æ”¯æµ‹è¯•**: ä½¿ç”¨é¢„è§ˆéƒ¨ç½²æµ‹è¯•æ›´æ”¹```bash

4. **å›æ»š**: ä½¿ç”¨éƒ¨ç½²å†å²å¿«é€Ÿå›æ»š# æµ‹è¯•ä¸»è¦ç«¯ç‚¹

curl -f https://sams-ai-fresh2.deno.dev/

## ğŸ“Š éƒ¨ç½²æœ€ä½³å®è·µcurl -f https://sams-ai-fresh2.deno.dev/login

curl -f https://sams-ai-fresh2.deno.dev/signup

### æ€§èƒ½ä¼˜åŒ–```



1. **æ•°æ®åº“è¿æ¥æ± **: ä½¿ç”¨è¿æ¥æ± é¿å…è¿æ¥è€—å°½### 6.3 æ£€æŸ¥æ—¥å¿—

2. **ç¼“å­˜ç­–ç•¥**: åˆ©ç”¨ Deno Deploy çš„è¾¹ç¼˜ç¼“å­˜

3. **é™æ€èµ„æº**: ä¼˜åŒ–å›¾ç‰‡å’Œ CSS èµ„æº- **GitHub Actions**: æŸ¥çœ‹å·¥ä½œæµæ‰§è¡Œæ—¥å¿—

4. **ç›‘æ§è®¾ç½®**: é…ç½®æ€§èƒ½ç›‘æ§å’Œå‘Šè­¦- **Deno Deploy**: æŸ¥çœ‹åº”ç”¨è¿è¡Œæ—¥å¿—



### å®‰å…¨æœ€ä½³å®è·µ## ğŸ”§ æ•…éšœæ’é™¤



1. **ç¯å¢ƒå˜é‡**: æ•æ„Ÿä¿¡æ¯åªå­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­### å¸¸è§é—®é¢˜

2. **HTTPS å¼ºåˆ¶**: Deno Deploy è‡ªåŠ¨å¼ºåˆ¶ HTTPS

3. **å®šæœŸæ›´æ–°**: ä¿æŒä¾èµ–é¡¹æ›´æ–°#### 1. GitHub App æƒé™é—®é¢˜

4. **è®¿é—®å®¡è®¡**: å®šæœŸå®¡æŸ¥è®¿é—®æƒé™
````

### CI/CD é›†æˆError: Failed to access repository

```
é¡¹ç›®åŒ…å«çš„ GitHub Actions å·¥ä½œæµä¼šï¼š

- âœ… è‡ªåŠ¨è¿è¡Œæµ‹è¯•**è§£å†³æ–¹æ¡ˆ**:

- âœ… æ£€æŸ¥ä»£ç è´¨é‡  

- âœ… æ„å»ºåº”ç”¨- ç¡®è®¤ Deno Deploy GitHub App æœ‰ä»“åº“è®¿é—®æƒé™

- âœ… å‡†å¤‡éƒ¨ç½²äº§ç‰©- é‡æ–°æˆæƒ GitHub App

- æ£€æŸ¥ç»„ç»‡æƒé™è®¾ç½®

Deno Deploy ä¼šåœ¨æ„å»ºæˆåŠŸåè‡ªåŠ¨è·å–äº§ç‰©è¿›è¡Œéƒ¨ç½²ã€‚

#### 2. æ„å»ºé…ç½®é—®é¢˜

## ğŸ”— ç›¸å…³èµ„æº
```

- [Deno Deploy æ–‡æ¡£](https://docs.deno.com/deploy/)Error: Build failed -
  framework not detected

- [Fresh 2 æ–‡æ¡£](https://fresh.deno.dev/) ```

- [GitHub Actions å·¥ä½œæµ](../.github/workflows/ci.yml)

- [æ•°æ®åº“æ¨¡å¼](../sql/schema.sql) **è§£å†³æ–¹æ¡ˆ**:

- [éƒ¨ç½²é…ç½®åŠ©æ‰‹](../scripts/setup-deployment.ts)

- ç¡®è®¤ä»“åº“åŒ…å« `deno.json` æ–‡ä»¶

---- Fresh 2 æ¡†æ¶é€šå¸¸è‡ªåŠ¨æ£€æµ‹

- æ£€æŸ¥æ„å»ºé…ç½®æ˜¯å¦æ­£ç¡®

## ğŸ‰ æ­å–œï¼

#### 3. æ•°æ®åº“è¿æ¥å¤±è´¥

ä½ ç°åœ¨æ‹¥æœ‰ä¸€ä¸ªå®Œå…¨è‡ªåŠ¨åŒ–çš„ Fresh 2 åº”ç”¨éƒ¨ç½²æµç¨‹ï¼

````
- ğŸš€ é›¶é…ç½®è‡ªåŠ¨éƒ¨ç½²Error: Failed to connect to database

- ğŸŒ å…¨çƒ CDN åˆ†å‘  ```

- ğŸ” å®æ—¶ç›‘æ§å’Œæ—¥å¿—

- ğŸ›¡ï¸ ä¼ä¸šçº§å®‰å…¨æ€§**è§£å†³æ–¹æ¡ˆ**:

- ğŸ“ˆ è‡ªåŠ¨æ‰©ç¼©å®¹

- æ£€æŸ¥`DATABASE_URL`æ ¼å¼

äº«å—ç°ä»£åŒ–çš„æ— æœåŠ¡å™¨éƒ¨ç½²ä½“éªŒå§ï¼- ç¡®è®¤æ•°æ®åº“æœåŠ¡å™¨å¯è®¿é—®
- éªŒè¯SSLè®¾ç½®

#### 4. ç¯å¢ƒå˜é‡ç¼ºå¤±
````

Error: JWT_SECRET is not defined

````
**è§£å†³æ–¹æ¡ˆ**:

- åœ¨Deno Deployé¡¹ç›®ä¸­è®¾ç½®æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒå˜é‡
- æ£€æŸ¥å˜é‡åç§°æ‹¼å†™

### è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**:
   ```yaml
   - name: Debug deployment
     run: |
       echo "Project: ${{ env.PROJECT_NAME }}"
       echo "Deno version: $(deno --version)"
````

2. **æµ‹è¯•æœ¬åœ°æ„å»º**:
   ```bash
   deno task build
   deno task start
   ```

3. **éªŒè¯ç¯å¢ƒå˜é‡**:
   ```bash
   deno eval "console.log(Deno.env.get('DATABASE_URL') ? 'âœ… DATABASE_URL set' : 'âŒ DATABASE_URL missing')"
   ```

## ğŸ“š é¢å¤–èµ„æº

- [Deno Deployæ–‡æ¡£](https://deno.com/deploy/docs)
- [GitHub Actions Secrets](https://docs.github.com/en/actions/security-guides/encrypted-secrets)
- [PostgreSQLè¿æ¥å­—ç¬¦ä¸²](https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING)
- [Fresh 2éƒ¨ç½²æŒ‡å—](https://fresh.deno.dev/docs/concepts/deployment)

---

ğŸ‰
**å®Œæˆåï¼Œä½ å°†æ‹¥æœ‰ä¸€ä¸ªå…¨è‡ªåŠ¨åŒ–çš„CI/CDæµæ°´çº¿ï¼Œæ¯æ¬¡æ¨é€åˆ°mainåˆ†æ”¯éƒ½ä¼šè‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼**
